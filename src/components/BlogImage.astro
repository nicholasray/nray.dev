---
import { Image } from "@components/Image/index.astro";

interface Props {
  src: ImageMetadata;
  alt: string;
  caption?: string;
  shadow?: boolean;
  background?: boolean;
}

const { src, alt, caption, shadow, background, ...props } = Astro.props;
---

<figure>
  <a href={src.src}>
    <Image
      alt={alt}
      class:list={[
        "w-full rounded-lg",
        { "shadow-xl": shadow, "bg-white": background },
      ]}
      src={src}
      widths={src.format !== "svg" ? [400, 800, 1800] : undefined}
      sizes={src.format !== "svg"
        ? "(min-width: 48rem) 55rem, 100vw"
        : undefined}
      {...props}
    />
  </a>
  {caption && <figcaption>{caption}</figcaption>}
</figure>
